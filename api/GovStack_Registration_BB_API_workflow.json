{
	"openapi": "3.0.0",
	"info": {
		"title": "Registration Building Block API for Applicant user services",
		"description": "Applicant can see list of registration services from registration workflow component. Modification of Govstack Workflow BB service description https://github.com/GovStackWorkingGroup/bb-workflow/tree/main/api ",
		"termsOfService": "#",
		"contact": {
			"email": "ingmar.vali@gmail.com"
		},
		"license": {
			"name": "MIT",
			"url": "https://opensource.org/license/mit/"
		},
		"version": "0.0.1"
	},
	"servers": [{
		"url": "http://ss2.egovstack.net/r1/eGovStack/COM/11222456/RegistrationBB/creg/",
		"description": "Information Mediator BB Security server"
	}],

	"paths": {
		"/services": {
			"get": {
				"tags": [
					"Applicant"
				],
				"summary": "returns a list of services (Services available to use)",
				"description": "Listing of all services with basic information",
				"operationId": "getServiceList",
				"parameters": [{
						"name": "name",
						"in": "query",
						"schema": {
							"type": "string"
						},
						"required": false,
						"example": "Register Mother and Child"
					}

				],
				"responses": {
					"200": {
						"description": "list of services",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {
										"$ref": "#/components/schemas/service"
									}
								}
							}
						}
					},
					"404": {
						"description": "services not found"
					},
					"500": {
						"$ref": "#/components/responses/InternalServerError"
					}
				}
			}
		},
		"/services/{serviceKey}": {
			"get": {
				"tags": [
					"Applicant"
				],
				"summary": "returns detailed information about a service",
				"description": "Pass in the ID of the service and it will return all information about that service\n",
				"operationId": "getService",
				"parameters": [{
					"$ref": "#/components/parameters/serviceIdParam"
				}],
				"responses": {
					"200": {
						"description": "Service found and representation returned",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/service"
								}
							}
						}
					},
					"404": {
						"description": "service not found"
					},
					"500": {
						"$ref": "#/components/responses/InternalServerError"
					}
				}
			}
		}

	},





	"components": {
		"parameters": {
			"Information-Mediator-Client": {
				"in": "header",
				"name": "Information-Mediator-Client",
				"example": "eGovStack/GOV/90000009/digitalregistries",
				"description": "Format is: INSTANCE/CLASS/MEMBER/SUBSYSTEM",
				"schema": {
					"type": "string"
				},
				"required": true
			},
			"serviceIdParam": {
				"in": "path",
				"name": "serviceKey",
				"required": true,
				"schema": {
					"type": "string",
					"example": "P2c9280957e579ad7017e58a3399f0068"
				},
				"description": "The id for a defined service in the registration BB workflow engine."
			}

		},
		"schemas": {
			"serviceDefinition": {
				"type": "object",
				"required": [
					"name",
					"serviceKey",
					"type",
					"version"
				],
				"properties": {
					"name": {
						"type": "string",
						"description": "name of a service",
						"example": "Mother and Child Registration"
					},
					"serviceKey": {
						"type": "string",
						"description": "service Key",
						"example": "P2c9280957e579ad7017e58a3399f0068"
					},
					"version": {
						"type": "string",
						"description": "service version number",
						"example": "123"
					},
					"type": {
						"type": "string",
						"enum": [
							"None",
							"Private",
							"Public"
						]
					},
					"isExecutable": {
						"type": "boolean",
						"description": "Specifies whether the service is executable"
					},
					"isClosed": {
						"type": "boolean",
						"description": "whether Messages and Events, not modeled in Service, can occur when the service is executed or performed"
					},
					"description": {
						"type": "string"
					},
					"serviceBody": {
						"$ref": "#/components/schemas/ListOfProperties"
					}
				}
			},
			"service": {
				"type": "object",
				"properties": {
					"id": {
						"type": "integer",
						"description": "generated by a system surrogate primary key"
					},
					"serviceDefinition": {
						"$ref": "#/components/schemas/serviceDefinition"
					}
				}
			},

			"ListOfProperties": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"code": {
							"type": "string"
						},
						"value": {
							"type": "string"
						}
					}
				}
			}
		},
		"responses": {
			"InternalServerError": {
				"description": "Internal server error, please contact administrator"
			}
		}
	}
}
